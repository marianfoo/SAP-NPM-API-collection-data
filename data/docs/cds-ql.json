[{"name":"CHANGELOG.md","content":"# Changelog\r\n\r\nAll notable changes to this project will be documented in this file.\r\n\r\nThis project adheres to [Semantic Versioning](http://semver.org/).\r\n\r\nThe format is based on [Keep a Changelog](http://keepachangelog.com/).\r\n\r\n## Version 1.21.2 - 2020-08-12\r\n\r\n### Fixed\r\n- README and LICENSE\r\n\r\n## Version 1.21.1 - 2019-11-29\r\n\r\n### Added\r\n\r\n- `SELECT.forUpdate` to lock columns on a table\r\n\r\n## Version 1.21.0 - 2019-11-19\r\n\r\n### Added\r\n\r\n- Acquire now sets session contexts `valid-from` and `valid-to`\r\n\r\n### Fixed\r\n\r\n- Single ticked entry in function now resolves to `val` instead of `ref`\r\n\r\n## Version 1.20.1 - 2019-10-30\r\n\r\n### Changed\r\n\r\n- Updated version of @sap/cds-sql to 1.19.1\r\n- Updated version of @sap/cds-sqlite to 1.19.1\r\n- Updated version of @sap/cds-hana to 1.19.1\r\n\r\n## Version 1.20.0 - 2019-10-29\r\n\r\n### Changed\r\n\r\n- Improved UPDATE error messages\r\n\r\n### Removed\r\n\r\n- `npm-shrinkwrap.json`\r\n\r\n## Version 1.19.2 - 2019-10-16\r\n\r\n### Changed\r\n\r\n- `.run` handles arrays in a `Promise.all` fashion\r\n\r\n## Version 1.19.1 - 2019-10-08\r\n\r\n### Fixed\r\n\r\n- Default mainkind in case of compound service (messaging and rest)\r\n\r\n## Version 1.19.0 - 2019-10-02\r\n\r\n### Changed\r\n\r\n- Updated version of @sap/cds-sql to 1.18.0\r\n- Updated version of @sap/cds-sqlite to 1.18.0\r\n- Updated version of @sap/cds-hana to 1.18.0\r\n\r\n## Version 1.18.2 - 2019-09-18\r\n\r\n### Changed\r\n\r\n- Improved error messages\r\n\r\n### Fixed\r\n\r\n- Disconnect in multi tenancy scenario\r\n\r\n## Version 1.18.1 - 2019-09-10\r\n\r\n### Fixed\r\n\r\n- Model loading\r\n\r\n## Version 1.18.0 - 2019-09-09\r\n\r\n### Changed\r\n\r\n- Improved error messages for statements\r\n- No more model loading, model needs to be passed now\r\n\r\n### Fixed\r\n\r\n- Nested functions as strings in statements\r\n- Options in connect combined with env variables \r\n\r\n### Removed\r\n\r\n- Workaround for `onCond` that used custom object notation\r\n\r\n## Version 1.17.0 - 2019-08-21\r\n\r\n### Added\r\n\r\n- `options.kind` can also be an object\r\n- Service related functions `create`, `insert`, `read`, `update` and `delete` to transaction\r\n- Http related functions `get`, `post`, `put`, `patch` and `delete` to transaction\r\n\r\n### Changed\r\n\r\n- `.transaction(...).run` can be used with an array of queries\r\n\r\n### Fixed\r\n\r\n- Update with binary property\r\n\r\n## Version 1.16.0 - 2019-07-23\r\n\r\n### Changed\r\n\r\n- Updated version of @sap/cds-sql to 1.15.0\r\n- Updated version of @sap/cds-sqlite to 1.15.0\r\n- Updated version of @sap/cds-hana to 1.15.0\r\n\r\n## Version 1.15.0 - 2019-07-09\r\n\r\n### Added\r\n\r\n- Enhanced statements to be compatible to specification\r\n- Support for views with parameters\r\n\r\n### Removed\r\n\r\n- `generateUUID` function and `uuid`dependency\r\n- usage of xsenv for authorization (is provided by cds.env)\r\n\r\n## Version 1.14.0 - 2019-06-24\r\n\r\n### Fixed\r\n\r\n- Bug with nested types in update\r\n- Improved logging of SQLs when DEBUG=true is provided\r\n\r\n## Version 1.13.0 - 2019-06-07\r\n\r\n### Changed\r\n\r\n - updated generic-pool to 3.7.1\r\n\r\n## Version 1.12.0 - 2019-05-24\r\n\r\n### Removed\r\n\r\n- Removed superficial cache for services\r\n\r\n## Version 1.11.1 - 2019-05-16\r\n\r\n### Changed\r\n\r\n- Updated version of @sap/cds-sql to 1.11.1\r\n- Updated version of @sap/cds-sqlite to 1.11.1\r\n- Updated version of @sap/cds-hana to 1.11.1\r\n\r\n## Version 1.11.0 - 2015-05-15\r\n\r\n### Changed\r\n\r\n- Improved performance by reducing calls to process.nextTick()\r\n\r\n## Version 1.10.2 - 2019-05-08\r\n\r\n### Fixed\r\n\r\n- `service.deploy`\r\n\r\n## Version 1.10.1 - 2019-05-07\r\n\r\n### Changed\r\n\r\n- More resilience towards setting the model manually in service\r\n\r\n## Version 1.10.0 - 2019-05-03\r\n\r\n### Added\r\n\r\n- Functions `create`, `insert`, `read`, `update` and `delete` added to service\r\n- Streaming support via `service.stream()`\r\n\r\n### Changed\r\n\r\n- instanceof replaced with typeof in some cases\r\n\r\n## Version 1.9.0 - 2019-04-16\r\n\r\n### Changed\r\n\r\n- Select.one now adds property ```one``` instead of ```limit``` to CQN\r\n- Transactions can be created (i.e. are not promisified) although initial model loading is not yet finished\r\n\r\n## Version 1.8.0 - 2019-03-29\r\n\r\n### Added\r\n\r\n- Support for transactions on multiple data sources\r\n\r\n- Service.stream() provided for cds.stream()\r\n\r\n### Changed\r\n\r\n- Entities can be accessed via short name (if only one service in model)\r\n\r\n## Version 1.7.1 - 2019-03-19\r\n\r\n### Changed\r\n\r\n- Updated version of @sap/cds-hana to 1.7.1\r\n\r\n## Version 1.7.0 - 2019-03-19\r\n\r\n### Added\r\n\r\n- Added more transaction functions (`tx.foreach`, `tx.commit`, `tx.rollback`)\r\n\r\n### Changed\r\n\r\n- Prevent app crash if tenant cannot connect\r\n- Service hands over model to clients\r\n\r\n## Version 1.6.0 - 2019-02-25\r\n\r\n### Changed\r\n\r\n- Updated version of @sap/cds-sql to 1.6.0\r\n- Updated version of @sap/cds-sqlite to 1.6.0\r\n- Updated version of @sap/cds-hana to 1.6.0\r\n\r\n## Version 1.5.1 - 2019-02-12\r\n\r\n### Added\r\n\r\n- Support for sql functions lower, upper, trim, length in $filter and $orderby\r\n- Support `.and` for where conditions\r\n\r\n### Fixed\r\n\r\n - Use `.entities` from reflected models\r\n\r\n## Version 1.5.0 - 2019-02-06\r\n\r\n### Changed\r\n\r\n- Minimum node version 8.9.0\r\n\r\n## Version 1.4.0 - 2019-01-22\r\n\r\n### Changed\r\n\r\n- Use latest version of @sap/cds-sql\r\n\r\n## Version 1.3.0 - 2019-01-11\r\n\r\n### Changed\r\n\r\n- Use latest version of uuid and @sap/cds-sql\r\n\r\n## Version 1.2.0 - 2018-12-21\r\n\r\n### Added\r\n\r\n- Allow Arrays in `UPDATE.set()`\r\n\r\n## Version 1.1.0 - 2018-12-12\r\n\r\n### Added\r\n\r\n- Support for `full join` in SELECT\r\n- Support for inline\r\n\r\n## Version 1.0.0 - 2018-11-27\r\n\r\n### Added\r\n\r\n- tenantId can be specified at disconnect\r\n- model property can specified at connect\r\n- entities and model of connection can be accessed\r\n\r\n### Changed\r\n\r\n- Connect option `driver` is renamed to `kind`\r\n- Connect options regarding connecting moved to 'credentials' property instead of one flat object\r\n\r\n### Fixed\r\n\r\n- Read drafts with $filter/$search\r\n\r\n## Version 0.12.0 - 2018-10-17\r\n\r\n### Added\r\n\r\n- .where supports object notation with arrays of and/or\r\n\r\n### Changed\r\n\r\n- Refactoring and changes due to updated dependencies\r\n\r\n## Version 0.11.0 - 2018-10-04\r\n\r\n### Added\r\n\r\n- Support of string values bei fluid usage in .where\r\n\r\n### Fixed\r\n\r\n- Promise rejection in Service.run\r\n\r\n## Version 0.10.0 - 2018-09-17\r\n\r\n### Added\r\n\r\n- Auto lookup of db service if no configuration given at connect but is available at environmental VCAP_SERVICES\r\n- Support of an array as argument in .where\r\n\r\n## Version 0.9.1 - 2018-09-05\r\n   \r\n### Changed\r\n\r\n- Improved npm-shrinkwrap\r\n\r\n## Version 0.9.0 - 2018-08-28\r\n\r\n### Added\r\n\r\n- Added support for .columns() in SELECT\r\n- where/or/having support fluid API based on the first argument\r\n- init.js at reuse model can be used by deploy and may export an async function\r\n   \r\n### Changed\r\n\r\n- any object filter combination of @sap/xsenv can be used to search the db service\r\n\r\n## Version 0.8.1 - 2018-08-09\r\n\r\n### Changed\r\n\r\n- Require submodules on demand\r\n\r\n## Version 0.8.0 - 2018-08-07\r\n\r\n### Added\r\n\r\n- Pool and Pool resources are evicted by default\r\n- .from, .where and .having support partial CQN\r\n- Inline support at CQN of where and columns in Select\r\n- Functions .values and .entries at INSERT \r\n- Support of .run().then.run() shortcut\r\n- Debug is printed in case environmental variable DEBUG=true is set\r\n- SELECT(<column>, <column>).from(<table>)\r\n- SELECT.from(<table>).where({<column>: CQN})\r\n- Support for unary and binary expressions in contains\r\n- Support for expand with string/array notation in SELECT.columns (e. g. SELECT.from('Books', ['author', ['name']]))\r\n- Support for excluding in service projection\r\n  \r\n### Changed\r\n\r\n- .where and .having can be used multiple times instead of .where.and or .having.and\r\n- .or can be used directly: Instead of calling where.or you can call or.or\r\n\r\n### Fixed\r\n\r\n- Issue with service renaming attributes\r\n- Issue with 'exists' in object mode\r\n\r\n### Removed\r\n\r\n- .and for .where/.having\r\n\r\n## Version 0.7.0 - 2018-07-11\r\n\r\n### Fixed\r\n\r\n- Race condition at running block statements in transactional mode\r\n- Brackets are only added to where or having if needed\r\n\r\n### Removed\r\n\r\n- Statement blocks cannot be run with \"sequential\" pragma anymore (use \"serialized\" instead)\r\n\r\n## Version 0.6.0 - 2018-07-02\r\n\r\n### Added\r\n\r\n- Multi tenancy support\r\n\r\n## Version 0.5.0 - 2018-06-25\r\n\r\n### Added\r\n\r\n- support .deploy to automatically set up database artifacts\r\n- support of SQL functions lower and contains in .where\r\n- support for navigation over entities with multiple keys\r\n- SELECT allows partial CQNs as columns\r\n- .run can execute blocks of statements\r\n\r\n### Changed\r\n\r\n- support for latest CQN spec changes\r\n- renamed .hasPool to .hasSession\r\n\r\n### Fixed\r\n\r\n- CQL navigation on entity\r\n- CDS injection\r\n- .where with nested ORs and ANDs if provided as object input parameter \r\n\r\n## Version 0.4.1 - 2018-05-03\r\n\r\n### Fixed\r\n\r\n- Issue with postinstall script in package.json\r\n\r\n## Version 0.4.0 - 2018-05-02\r\n\r\n### Added\r\n\r\n- support DROP statements\r\n- connection pool validates resources before provisioning\r\n- support .foreach\r\n- cds used via injection\r\n- support fluid usage of .where and .having in DML statements\r\n\r\n### Changed\r\n\r\n- connect options aligned to spec\r\n- support for latest CQN spec changes\r\n- refactored .connect to return undefined instead of Promise\r\n- refactored .acquire to wait for .connect before providing a client\r\n\r\n## Version 0.3.0 - 2018-04-16\r\n\r\n### Added\r\n\r\n- allow CQN as parameter in SELECT.from\r\n- support CREATE statements\r\n\r\n## Version 0.2.0 - 2018-03-16\r\n### Added\r\n\r\n- support for SELECT.one\r\n- usage of npm-shrinkwrap\r\n\r\n### Changed\r\n\r\n- made generateUUID synchronous\r\n"},{"name":"README.md","content":"# @sap/cds-ql\r\n\r\nThe `@sap/cds-runtime` module is the successor of `@sap/cds-ql`. Please note that future development and bug fixes will be provided in the `@sap/cds-runtime` module only.\r\n\r\n## License\r\nThis package is provided under the terms of the [SAP Developer License Agreement](https://tools.hana.ondemand.com/developer-license-3.1.txt).\r\n\r\n"}]