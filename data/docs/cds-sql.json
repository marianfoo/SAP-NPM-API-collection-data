[{"name":"CHANGELOG.md","content":"# Changelog\r\n\r\nAll notable changes to this project will be documented in this file.\r\n\r\nThis project adheres to [Semantic Versioning](http://semver.org/).\r\n\r\nThe format is based on [Keep a Changelog](http://keepachangelog.com/).\r\n\r\n## Version 1.24.1 - 2020-08-12\r\n\r\n### Fixed\r\n- README and LICENSE\r\n\r\n## Version 1.24.0 - 2020-03-19\r\n\r\n### Added\r\n\r\n- Support for different columns combinations in INSERT.entries\r\n- Support for $count in SELECT CQN\r\n- Support String objects in the annotation expressions\r\n- .setTransactionTimestamp in BaseClient\r\n- check for @cds.persistence.skip for deep operations\r\n\r\n### Changed\r\n\r\n- Use || for concat (works for HANA and sqlite)\r\n\r\n### Fixed\r\n\r\n- Using view by draft & localized \r\n- Quote alias in orderBy to work on HANA\r\n- Expand from not draft enabled entity to draft enabled entity\r\n- `where` and `orderBy`clauses containing navigations in combination with expand are correctly translated to SQL\r\n\r\n## Version 1.23.2 - 2020-02-25\r\n\r\n### Fixed\r\n\r\n- Missing alias for orderBy caused column ambiguously defined error\r\n\r\n## Version 1.23.1 - 2020-02-21\r\n\r\n### Added\r\n\r\n- Support for set and data in UPDATE CQN\r\n- Support draft for localized texts \r\n- Support for with and data in UPDATE CQN\r\n\r\n## Version 1.23.0 - 2020-02-19\r\n\r\n### Changed\r\n\r\n- Convert all search queries using `contains` to `like`\r\n\r\n### Fixed\r\n\r\n- Searching for `_` or `%` in `$search`\r\n\r\n## Version 1.22.0 - 2020-02-05\r\n\r\n### Changed\r\n\r\n- Managed fields are not removed anymore if they dont belong to operation (e.g. modifiedAt in INSERT, createdAt in UPDATE)\r\n- `null` is a valid value for a managed field (e. g. if `null` is provided for `@cds.on.insert`, `null` will be inserted to DB)\r\n\r\n### Fixed\r\n\r\n- Expand with composition to one for draft enabled entity\r\n\r\n## Version 1.21.0 - 2019-12-10\r\n\r\n### Fixed\r\n\r\n- post-processing for columns with function calls\r\n\r\n## Version 1.20.1 - 2019-11-29\r\n\r\n- Error message when ambiguous naming of alias and entity property occurs in SELECT query\r\n\r\n### Changed\r\n\r\n- Minor improvements\r\n\r\n## Version 1.20.0 - 2019-11-19\r\n\r\n### Fixed\r\n\r\n- Managed fields were not generated when values are null\r\n- Read of active entity with navigation and orderBy with draft specific column (e.g `HasActiveEntity`)\r\n\r\n## Version 1.19.1 - 2019-10-30\r\n\r\n### Fixed\r\n\r\n- Expand adding foreign keys twice\r\n\r\n## Version 1.19.0 - 2019-10-29\r\n\r\n### Changed\r\n\r\n- Improved deep update\r\n\r\n### Removed\r\n\r\n- `npm-shrinkwrap.json`\r\n\r\n## Version 1.18.1 - 2019-10-16\r\n\r\n### Fixed\r\n\r\n- Problems with deep update of a composition of one\r\n- Unhandled promise rejections by expand\r\n\r\n## Version 1.18.0 - 2019-10-02\r\n\r\n### Fixed\r\n\r\n- Problems with backlinks with custom on condition\r\n\r\n## Version 1.17.1 - 2019-09-18\r\n\r\n### Changed\r\n\r\n- Improved error messages\r\n- Improves SQL Builder for `.where` clauses\r\n\r\n## Version 1.17.0 - 2019-09-09\r\n\r\n### Fixed\r\n\r\n- Expand-to-one in draft context\r\n- Expand with multiple orderby elements using window function\r\n- `UUID` generation for `INSERT` statements\r\n\r\n## Version 1.16.0 - 2019-08-21\r\n\r\n### Fixed\r\n\r\n- Missing sub-select columns in case of UNIONs (e.g. when expanding on the DraftAdminTable)\r\n- UUID generation in custom built deep inserts/updates\r\n\r\n## Version 1.15.0 - 2019-07-23\r\n\r\n### Added\r\n\r\n- `getDraftCompositionTree` to get draft specific composition tree\r\n\r\n### Fixed\r\n\r\n- Deep Operations with custom on-Condition without backlink\r\n\r\n## Version 1.14.0 - 2019-07-09\r\n\r\n### Fixed\r\n\r\n- Combination of `expand` with instance-based authorization\r\n\r\n## Version 1.13.0 - 2019-06-24\r\n\r\n### Added\r\n\r\n- Struct Mapper checks subselect for matching columns\r\n\r\n## Version 1.12.0 - 2019-05-24\r\n\r\n### Changed\r\n\r\n- Deep insert/update for to-many associations is not allowed\r\n\r\n### Fixed\r\n\r\n- Property mapper now works for fully-specified columns in SELECT statements\r\n\r\n## Version 1.11.1 - 2019-05-16\r\n\r\n### Fixed\r\n\r\n- Cases with multiple brackets during `onCond` generation\r\n\r\n## Version 1.11.0 - 2019-05-15\r\n\r\n### Fixed\r\n\r\n- Annotate elements with both `@cds.on.insert` and `@cds.on.update`\r\n\r\n## Version 1.10.0 - 2019-05-03\r\n\r\n### Added\r\n\r\n- Support for composition to-one using `$self`\r\n- Service functions `update`, `read`, `insert`, `delete` and `create`\r\n\r\n### Fixed\r\n\r\n- Expand with compound keys and orderby where order column is not requested\r\n- Deeply nested expands\r\n\r\n## Version 1.9.0 - 2019-04-16\r\n\r\n### Fixed\r\n\r\n- Cascading `Delete CQN` generation in case of transitive model\r\n\r\n## Version 1.8.0 - 2019-03-29\r\n\r\n### Changed\r\n\r\n- Minor improvements\r\n- alphabetical aliases instead of md5 in case of expand\r\n\r\n## Version 1.7.0 - 2019-03-19\r\n\r\n### Added\r\n\r\n- Support for 'list' in function arguments\r\n- Support for ```from: { ref: [] }``` in DeleteBuilder\r\n- Support for Compositions with custom on condition (no and/or)\r\n\r\n### Fixed\r\n\r\n- Expanding of on active draft documents lists without $filter\r\n- Expand of entities with compound key might return duplicate results\r\n\r\n## Version 1.6.0 - 2019-02-25\r\n\r\n### Added\r\n\r\n- Support for 'func' as defined in cqn spec\r\n- Support for 'list' in expressions\r\n- Support for deep insert with recursive entities\r\n\r\n### Changed\r\n\r\n### Fixed\r\n\r\n- Recursion in composition tree\r\n- Added brackets in oncond\r\n- Fixed is null / is not null in oncond\r\n- Falsy values at expanded elements\r\n- Fixed expand with selected column 'IsActiveEntity'\r\n\r\n## Version 1.5.1 - 2019-02-12\r\n\r\n### Added\r\n\r\n- Support for sql functions lower, upper, trim, length in $filter and $orderby\r\n\r\n## Version 1.5.0 - 2019-02-06\r\n\r\n### Added\r\n\r\n- Support for ```INSERT into ... SELECT ...```\r\n\r\n### Changed\r\n\r\n- Minimum node version 8.9.0\r\n- Improve expand performance\r\n\r\n## Version 1.4.0 - 2019-01-22\r\n\r\n### Added\r\n\r\n- Construct SQLs from CQN which includes placeholder\r\n- Support draft scenario 'Locked by another user'\r\n\r\n## Version 1.3.0 - 2019-01-11\r\n\r\n### Added\r\n\r\n- Support for compound keys\r\n\r\n### Changed\r\n\r\n- Improve inline detection\r\n\r\n## Version 1.2.0 - 2018-12-21\r\n\r\n### Added\r\n\r\n- Set default values in case of CREATE, UPSERT and adding a child in deep documents\r\n- Reversed cascade delete\r\n\r\n## Version 1.1.0 - 2018-12-12\r\n\r\n### Added\r\n\r\n- Support Deep Document CQNs\r\n- Support for inline\r\n- Post processing with CQN that uses select *\r\n\r\n### Fixed\r\n\r\n- Expand in combination with left outer joins\r\n\r\n## Version 1.0.3 - 2018-11-27\r\n\r\n### Changed\r\n\r\n- Throw root cause instead of CqnParseError\r\n- Throw root cause instead of SqlError\r\n\r\n### Fixed\r\n\r\n- Binary generated wrong SQL\r\n- Complex CQN with draft and expand for Hana\r\n- Expand modifies copy instead of original CQN\r\n- Expand with missing columns\r\n- Expand in combination with limit\r\n- Post processing of DateTime and Boolean\r\n\r\n## Version 0.12.0 - 2018-10-17\r\n\r\n- Refactoring and changes due to updated dependencies\r\n\r\n## Version 0.11.0 - 2018-10-04\r\n\r\n### Added\r\n\r\n- Expanding of drafts entries at list pages\r\n- Expanding of drafts entries at object pages\r\n\r\n## Version 0.10.0 - 2018-09-17\r\n\r\n### Added\r\n\r\n- Support of now/user annotations in structured type\r\n- Support of expand in combination with contains at where\r\n- Support of LIMIT/OFFSET, ORDER BY and WHERE at expanded items\r\n- Custom types on top of associations\r\n- Support columns: ['*'] at CQN\r\n\r\n## Version 0.9.2 - 2018-09-05\r\n\r\n### Added\r\n\r\n- SQL generation for SELECT statements that include UNION\r\n\r\n### Changed\r\n\r\n- Improved npm-shrinkwrap\r\n\r\n### Fixed\r\n\r\n- Postprocessing breaks without CSN\r\n\r\n## Version 0.9.1 - 2018-08-28\r\n\r\n(Preparation for Release)\r\n\r\n## Version 0.9.0 - 2018-08-28\r\n\r\n### Changed\r\n\r\n- .getColumns includes annotations\r\n- .deploy of BaseClient uses CDS-Compiler to do database setup\r\n\r\n### Fixed\r\n\r\n- SQL generation in case of CREATE statements using structured elements containing managed associations\r\n- Postprocessing of expand to many in plain mode\r\n\r\n## Version 0.8.1 - 2018-08-09\r\n\r\n### Changed\r\n\r\n- Require submodules on demand\r\n\r\n## Version 0.8.0 - 2018-08-07\r\n\r\n### Added\r\n\r\n- Support for exists in combination with expand\r\n- Support column annotations '@cds.on.insert', '@cds.on.update', '@odata.on.insert' and '@odata.on.update'\r\n- Post processing of complex and structured types\r\n- Support for unary and binary expressions in contains\r\n- Support for CQN partials at .where\r\n\r\n### Changed\r\n\r\n- Renamed SELECT.elements to SELECT.columns\r\n- SQL Error provides info about the executed query and values in logs\r\n\r\n### Fixed\r\n\r\n- Deep expands with more than 10 levels\r\n- Expand to composition and further to one association\r\n- Structured types at expand could lead to ambiguity\r\n\r\n## Version 0.7.0 - 2018-07-11\r\n\r\n### Added\r\n\r\n- CREATE supports type cds.Composition\r\n- Expand supports type cds.Composition\r\n- Support for structured elements\r\n\r\n## Version 0.6.0 - 2018-07-02\r\n\r\n### Added\r\n\r\n<!-- Was never documented publicly: - Shortcut for running queries with run().then.run() -->\r\n\r\n### Fixed\r\n\r\n- SQL generation in case of combination of navigation and expand in SELECT statements\r\n\r\n## Version 0.5.0 - 2018-06-25\r\n\r\n### Added\r\n\r\n- custom builders can now be provided via options in SQL Builder\r\n- support create with views\r\n- added SQL Error to hide the internal information from other errors\r\n- support structured elements\r\n- support for complex types in Create Builder\r\n- BaseClient has method .deploy to easily create database artifacts from csn model\r\n- support for SQL function contains by converting it using like\r\n- support execution of blocks of statements\r\n\r\n### Changed\r\n\r\n- quotation in SQL generation is now configurable (default is plain)\r\n- support for latest CQN spec changes\r\n\r\n### Fixed\r\n\r\n- column generation for managed associations\r\n- CREATE statement with managed association as key\r\n- resolve $self for expand\r\n- 1:1 associations can be null\r\n\r\n## Version 0.4.0 - 2018-05-02\r\n\r\n### Added\r\n\r\n- BaseClient has methods .run & .foreach & .isValid\r\n\r\n### Changed\r\n\r\n- support for latest CQN spec changes\r\n\r\n## Version 0.3.0 - 2018-04-16\r\n\r\n### Added\r\n\r\n- support CREATE statements\r\n\r\n### Fixed\r\n\r\n- auto-generated columns in expand=* requests\r\n\r\n## Version 0.2.0 - 2018-03-16\r\n### Added\r\n\r\n- usage of npm-shrinkwrap\r\n\r\n### Changed\r\n\r\n- improved performance for expand in case of one-to-many relations\r\n\r\n### Fixed\r\n\r\n- ambiguous column name when having multiple expands on same entity\r\n"},{"name":"README.md","content":"# @sap/cds-sql\r\n\r\nThe `@sap/cds-runtime` module is the successor of `@sap/cds-sql`. Please note that future development and bug fixes will be provided in the `@sap/cds-runtime` module only.\r\n\r\n## License\r\nThis package is provided under the terms of the [SAP Developer License Agreement](https://tools.hana.ondemand.com/developer-license-3.1.txt).\r\n"}]