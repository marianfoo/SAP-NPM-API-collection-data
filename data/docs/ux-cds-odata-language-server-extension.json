[{"name":"CHANGELOG.md","content":"# Change Log\r\nAll notable changes to this project are documented in this file.\r\n\r\nThis project adheres to [Semantic Versioning](http://semver.org/) and the changelog is formatted based on [Keep a Changelog](http://keepachangelog.com/).\r\n\r\n## [1.5.4] - 2022-04-14\r\n### Fixed\r\n- Unjustified error for `LocalDataProperty` in `Common.ValueList` when the property is defined in the service using a `many` clause.\r\n- Unjustified error for `Action` in `UI.DataFieldForAction` if it contains the signatures (i.e. the parts in () ) . \r\n- Unjustified warning for CAP CDS native annotation `@mandatory` when applied to a parameter.\r\n\r\n## [1.3.5] - 2021-09-30\r\n### Fixed\r\n- Unjustified error \"path does not exist\" for paths pointing to entity elements defined as structured type. \r\n\r\n## [1.2.5] - 2021-07-22\r\n### Fixed\r\n- Unjustified warning for the 'assert.integrity' term when applied to the service.\r\n\r\n## [1.2.3] - 2021-06-24\r\n### Added\r\n- Code completion, diagnostic and go to definition for string properties `CollectionPath` and `ValueListProperty` in `@Common.ValueList` annotation defined on the service level.\r\n- Semantic highlighting in OData annotations.\r\n### Changed\r\n- Updated comprised OData vocabularies to include HTML5 vocabulary https://sap.github.io/odata-vocabularies/vocabularies/HTML5.html.\r\n\r\n\r\n## [1.2.0] - 2021-05-27\r\n### Changed\r\n- Updated comprised OData vocabularies.\r\n### Fixed\r\n- Unjustified error message for expected type\r\n\r\n## [1.1.11] - 2021-05-13\r\n### Changed\r\n- Updated comprised OData vocabularies.\r\n\r\n## [1.1.8] - 2021-04-15\r\n### Added\r\n- Syntax warning for `/` or `.` after annotation term name.  \r\n\r\n### Changed\r\n- Removed paths to the same annotation from code completion. \r\n\r\n## [1.1.7] - 2021-03-31\r\n### Added\r\n- Go To References /Peek References / Show All References for the aggregared properties defined with the `@Analytics.AggregatedProperties` annotation. You can now navigate to the place where the aggregated property is referenced.\r\n\r\n### Changed\r\n- Vocabulary description and long description for restricted `String` values are now displayed in Quick Info window of the completion lists. \r\n\r\n## [1.1.5] - 2021-0304\r\n\r\n### Added\r\n- Code completion, diagnostics and quick info for applying selected client-side odata functions:\r\n  -  `odata.concat`\r\n  -  `odata.fillUriTemplate`\r\n  -  `odata.uriEncode`\r\n- Peek References/ Go To References for annotations referenced in other annotations. You can now see if and where the annotation is referenced. \r\nLimitation: references in propagated annotations might be not included.\r\n\r\n## [1.1.4] - 2021-02-25\r\n\r\n### Changed\r\n- Error message \"Invalid property\" for `@Common.ValueList.entity` substituted with warning of deprecated non-standard property.\r\n\r\n\r\n## [1.1.2] - 2021-02-04\r\n\r\n### Added\r\n- Peek Definition for the dynamically created aggregared properties. You can now see how and where the property used as an annotation value is defined also if it is  dynamically created using the Analytics.AggregatedProperties  annotation.\r\n- Go To Definition for the dynamically created aggregared properties. You can now navigate to the place where the aggregated property is defined with the Analytics.AggregatedProperties annotation.\r\n- Code completion and diagnostics for annotating types with terms applicable to properties and parameters. \r\n\r\n## [1.0.9] - 2021-01-21\r\n\r\n### Added\r\n- Code completion and diagnostics for cds-specific alternatives to OData annotations \r\n- Code completion and diagnostics for annotating services (entity containers)\r\n- Code completion and diagnostics for properties `IsActiveEntity` and `HasActiveEntity` auto-generated on applying `@odata.draft.enabled`\r\n- Peek Definition for entity type properties and actions used in annotations. You can now see where the entity type property or action is defined.\r\n- Go To Definition for entity type properties and actions used in annotations. You can now navigate to the place in the service where the entity type property or action is defined.\r\n- Dedicated validation and quick fix for wrong case in annotation terms, properties, record types, `$Type`, `$value`, paths and enum values. You can now fix the typos related to wrong case with one click. \r\n- Dedicated validation for type mismatch in paths\r\n\r\n### Changed\r\n- Omitted qualifier tab stops in code completion snippets for annotation not applied to entity type \r\n- Omitted `:` in code completion snippets for boolean type annotations with default value `true`.\r\n\r\n## [1.0.7] - 2020-12-10\r\n\r\n### Added\r\n- Code completion and diagnostics for referencing actions in DataFieldForAction\r\n- Code completion and diagnostics for properties of open complex types (e.g. Data property in UI.ConnectedFields)\r\n- Code completion, diagnostics and hover information for a subset of cds [common annotations](https://cap.cloud.sap/docs/cds/annotations) recommended in SAP Cloud Application Programming documentation for [serving Fiori UIs](https://cap.cloud.sap/docs/advanced/fiori#prefer-title-and-description)\r\n- String attribute included by default in code snippets for annotation properties of type `Edm.String`\r\n\r\n\r\n## [1.0.6] - 2020-11-25\r\n\r\n### Changed\r\n- Enhanced error messages with additional information.\r\n\r\n### Fixed\r\n- Infinite loop at loading caused by unhandled block comments\r\n- Code completion and validation for $Return in annotations applied to bound actions or functions\r\n- Code completion and validation for paths starting with `_it` in annotations applied to bound actions or functions\r\n- Code completion and validation for relative paths to parameters\r\n\r\n## [1.0.5] - 2020-11-13\r\n\r\n### Added\r\n- Option to omit the redundant types if they are not mandatory based user setting omitRedundantTypesInSnippets.\r\n\r\n### Changed\r\n- Excluded some irrelevant path segments from the code completion in paths\r\n\r\n## [1.0.4] - 2020-11-11\r\n\r\n### Fixed\r\n- Performance for large projects\r\n\r\n## [1.0.3] - 2020-10-29\r\n\r\n### Added\r\n- Support for code completion, diagnostic and navigating to definition in paths to annotation. Example:\r\n    ```\r\n    KPI                 : {\r\n    SelectionVariant : ![@UI.SelectionVariant],\r\n    DataPoint        : ![@UI.DataPoint#test],\r\n    }\r\n    ```\r\n- Replacement behavior for editing annotations\r\n\r\n### Fixed\r\n- Code completion for adding annotation before existing annotation when a comma is missing\r\n- Code completion for path segments: removed actions from the completion lists\r\n- False validation for non-standard annotations `@Aggregation.default`, `@Capabilities.Insertable`, `@Capabilities.Updatable`, `@Capabilities.Deletable` and `@Capabilities.Readable`\r\n- False validation for 'Unknown Namespace ...'\r\n- False validation for 'Term cannot be applied ...'\r\n\r\n### Changed: \r\n- Removed qualifier tab stop in embedded annotation snippets, as qualifiers are not allowed there\r\n\r\n\r\n## [1.0.2] - 2020-10-16\r\n\r\n### Added\r\n- Hiding/showing the i18n-related diagnostic messages based on the user/workspace setting `Mark Missing I18n Default`\r\n- Support for flattened annotation structures\r\n- Support for annotating actions and functions\r\n\r\n### Fixed\r\n- Annotating annotations, e.g. annotating UI.LineItem with UI.Criticality\r\n\r\n## [1.0] - 2020-10-08\r\nRelease status: GA We are pleased to announce the official GA of the SAP Fiori tools - CDS OData Language Server.\r\n\r\n### Added\r\n- Basic code completion and diagnostics for annotating entities and elements\r\n- Complex micro snippets for simplified annotation definition\r\n- Vocabulary documentation on hover and in code completion lists\r\n- Internationalization support for language dependent strings: warnings with Quick Fix actions\r\n- Peek Definition support for referenced annotations \r\n- Go To Definition support for referenced annotations \r\n"},{"name":"README.md","content":"# @sap/ux-cds-odata-language-server-extension\r\n\r\nThe SAP Fiori tools - CDS OData Language Server enhances the functionality of [SAP Cloud Platform core data services plug-in for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=SAPSE.vscode-cds) with the features assisting you to define [OData annotations](https://cap.cloud.sap/docs/advanced/odata#annotations) in .cds files serving Fiori UIs.\r\n\r\n## **1. Code Completion**\r\n\r\nThe SAP Fiori tools - CDS OData Language Server provides a list of suggestions based on the service metadata and OData vocabularies. An application developer can open such a list of suggestions for annotation aliases, terms, records, properties and their values and accept one of them to speed up applying OData annotations to service entities and elements. The suggestion lists are context sensitive, and include only the values that are allowed by OData vocabulary specification. This eliminates the need to look up the valid elements and values or type complete values. \r\n\r\n## **2. Micro-Snippets**\r\n\r\nThe SAP Fiori tools - CDS OData Language Server  provides a number of generic micro-snippets in the suggestion lists. These are small blocks of code based on OData vocabulary definitions that can be inserted to avoid triggering the code completion for each annotation element separately. An application developer can insert repeating code patterns such as annotation aliases, terms, and records more efficiently.\r\n\r\n## **3. Diagnostics (error-checking)**\r\n\r\nThe SAP Fiori tools - CDS OData Language Server validates the OData annotations against the project metadata, annotation vocabularies, and OData specification. An application developer can view the diagnostic messages and navigate to the related place in the annotation file to fix the issues.\r\n\r\n## **4. Documentation (Vocabulary Information)**\r\n\r\nThe SAP Fiori tools - CDS OData Language Server provides vocabulary information for annotation terms and their elements, such as property values, record types, etc. This information may include a description, applicability, type, etc. It also indicates if a term/element is experimental or deprecated and informs the developer if the element is mandatory. An application developer can use this information to make a better decision on how to use the annotation. The documentation scope depends on the information provided in the respective vocabulary.\r\n\r\n## **5. Go to Definition/Peek Definition**\r\n\r\nThe Go To Definition feature helps you to navigate to the source of a referenced annotation and opens the result in a new tab.\r\n\r\nThe Peek Definition feature lets you preview the definition of a annotation without switching away from the code that you're writing.\r\n\r\n## **6. i18n Support**\r\n\r\nThe SAP Fiori tools - CDS OData Language Server provides diagnostic warning for hard-coded translatable text values which do not match the expected i18n reference format. Together with the standard functions of SAP Cloud Platform core data services plug-in it simplifies maintaining translateable values.\r\n\r\n\r\n## **Out of Scope**\r\n\r\nCompletion items for path values are only provided based on files referenced via the `using` directive and annotations applied to the entities exposed from the same service.\r\nAdditionally, this version of annotation language server doesn’t support:\r\n- [Core Data Services Common](https://cap.cloud.sap/docs/cds/annotations) annotations\r\n- Annotations applied to complex elements\r\n    ```\r\n    annotate IncidentService.Priority with {\r\n        code {\r\n            @(Common.Text: 'aaa') value;\r\n        }\r\n    };\r\n    ```\r\n- Annotations embedded in entity definitions\r\n    ```\r\n    entity IncidentService @(UI.SelectionFields: [incidentStatus_code]) {\r\n        title @Common : {\r\n                Text            : name,\r\n                TextArrangement : #TextOnly\r\n        } @title: 'Title'\r\n    };\r\n    ```\r\n- Annotations on parameters of parameterized entities \r\n\r\n\r\n## Known Issues\r\n\r\n- CDS path notation mixed with OData path notation (string value in CDS) in annotations.\r\n    - Value paths use CDS notation e.g `LineItem : [ {Value : category.code} ]`\r\n    - Annotation path uses OData path notation e.g \r\n    ```\r\n    Facets : [{\r\n        $Type:'UI.ReferenceFacet',\r\n        Target: 'incidentFlow/@UI.LineItem'\r\n    }]\r\n    \r\n    ```\r\n- Using generated fields from association in annotations. This is needed for correct interpretation by SAP Fiori Elements framework. \r\n\r\n\r\n## Vocabulary Support Matrix\r\n\r\nThe following OData vocabularies are supported by CDS Compiler and Annotation Service\r\n\r\n| Vocabulary                            | Annotation Service | CDS Compiler |\r\n| ------------------------------------- | ------------------ | ------------ |\r\n| Org.OData.Aggregation.V1              | X                  | X            |\r\n| Org.OData.Authorization.V1            | X                  | X            |\r\n| Org.OData.Capabilities.V1             | X                  | X            |\r\n| Org.OData.Core.V1                     | X                  | X            |\r\n| Org.OData.Measures.V1                 | X                  | X            |\r\n| Org.OData.Repeatability.V1            | X                  | X            |\r\n| Org.OData.Temporal.V1                 | X                  |              |\r\n| Org.OData.Validation.V1               | X                  | X            |\r\n| com.sap.vocabularies.Analytics.v1     | X                  | X            |\r\n| com.sap.vocabularies.CodeList.v1      | X                  | X            |\r\n| com.sap.vocabularies.Common.v1        | X                  | X            |\r\n| com.sap.vocabularies.Communication.v1 | X                  | X            |\r\n| com.sap.vocabularies.Graph.v1         | X                  | X            |\r\n| com.sap.vocabularies.Hierarchy.v1     | X                  | X            |\r\n| com.sap.vocabularies.HTML5.v1         |                    | X            |\r\n| com.sap.vocabularies.ODM.v1           | X                  | X            |\r\n| com.sap.vocabularies.PersonalData.v1  | X                  | X            |\r\n| com.sap.vocabularies.Session.v1       | X                  | X            |\r\n| com.sap.vocabularies.UI.v1            | X                  | X            |\r\n\r\n## **Support**\r\nJoin the [SAP Fiori tools Community](https://community.sap.com/search/?by=updated&ct=blog&mt=73555000100800002345). Ask Questions, Read the Latest Blogs, Explore Content.\r\nPlease assign tag: *SAP Fiori tools*\r\n\r\nTo log an issue with SAP Fiori tools, please see [Contact SAP Support](https://help.sap.com/viewer/1bb01966b27a429ebf62fa2e45354fea/Latest/en-US).\r\n\r\n## **Documentation**\r\n\r\nFor more information see https://cap.cloud.sap/docs/advanced/fiori#fiori-annotations\r\n"}]